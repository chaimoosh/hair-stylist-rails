<h3>Welcome <%= @user.name %></h3>
<%= link_to "Book Appointment", new_user_appointment_path(@user) %>
<br>
<button id="getAppt">View Appointments</button>

<div id="appointments">
  <ul id="appointmentTime">

  </ul>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript" charset="utf-8">
class dateTime {
  constructor (time) {
    this.time = time
  }
  formatTime(){
    var timeArray = this.time.split("-")
    var year = timeArray[0]
    var month = timeArray[1]
    var endString = timeArray[2]
    var day = endString.slice(0,2)
    var time = endString.slice(3,8)
    //debugger

    return (`${month} ${day} ${year} at ${time}`)
  }
}

$(document).ready(function () {
  $("#getAppt").on("click", function(){getAppt()})
  var getAppt = function (){
    $.get("/appointments.json", function(data){
      data.forEach(function(thing){
          let now = new dateTime(thing["time"])
          $("#appointmentTime").append(`<li>${now.formatTime()}</li>`)
        })
    })
  }
});
</script>
